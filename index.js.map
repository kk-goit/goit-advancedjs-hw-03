{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '46481963-10f537a41063d6fd7fead7408';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst BASE_PARAMS = '&image_type=photo&orientation=horizontal&safesearch=true';\n\nfunction searchPhotos(queryStr) {\n    return fetch(`${BASE_URL}?key=${API_KEY}${BASE_PARAMS}&q=` + encodeURIComponent(queryStr))\n        .then(res => {\n            if (!res.ok) {\n                throw new Error(res.status);\n            }\n            return res.json();\n        });\n }\n\nexport { searchPhotos }","\nfunction createGallery(photos) { \n  const galHtml = document.createElement('ul');\n  for (const imgData of photos) { \n    const li = document.createElement('li');\n    li.classList.add(\"gallery-item\");\n  \n    const img = document.createElement('img');\n    img.classList.add(\"gallery-image\");\n    img.setAttribute('src', imgData.webformatURL);\n    img.setAttribute('alt', imgData.tags);\n  \n    const a = document.createElement('a');\n    a.classList.add('gallery-link')\n    a.setAttribute('href', imgData.largeImageURL);\n    a.append(img);\n\n    li.append(a);\n\n    const desc = document.createElement('div');\n    desc.classList.add(\"gallery-descr\");\n\n    const likes = document.createElement('div');\n    likes.innerHTML = `<span>Likes</span>${imgData.likes}`;\n    desc.append(likes);\n    const views = document.createElement('div');\n    views.innerHTML = `<span>Views</span>${imgData.views}`;\n    desc.append(views);\n    const comms = document.createElement('div');\n    comms.innerHTML = `<span>Comments</span>${imgData.comments}`;\n    desc.append(comms);\n    const dwnlds = document.createElement('div');\n    dwnlds.innerHTML = `<span>Downloads</span>${imgData.downloads}`;\n    desc.append(dwnlds);\n\n    li.append(desc);\n\n    galHtml.append(li);\n  }\n  return galHtml.innerHTML;\n}\n\nexport { createGallery }\n\n","// import needed libs\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// import own main styles\nimport \"./css/styles.css\";\n\nimport { searchPhotos } from \"./js/pixabay-api.js\";\nimport { createGallery } from \"./js/render-functions.js\";\n\n\nconst sLightBox = new SimpleLightbox(\n    '.gallery a',\n    {\n      overlayOpacity: 0.8,\n      className: 'gallery-wrapper',\n      captionsData: 'alt',\n      captionDelay: 250\n    }\n);\niziToast.settings({\n    class: \"toast\",\n    position: \"topRight\",\n    drag: false,\n});\n\nconst theLoader = document.getElementById(\"modal\");\nconst theGallery = document.querySelector('.gallery');\n\ndocument.getElementById(\"search-form\").addEventListener(\"submit\", e => {\n    e.preventDefault();\n    const form = e.currentTarget;\n    const queryStr = form.elements.queryStr.value.trim();\n\n    theLoader.classList.add(\"is-open\");\n    theGallery.innerHTML = '';\n    searchPhotos(queryStr)\n        .then(data => {\n            if (data.total == 0) {\n                iziToast.error({ message: \"Sorry, there are no images matching your search query. Please try again!\" });\n            } else { \n                theGallery.innerHTML = createGallery(data.hits);\n                sLightBox.refresh();\n            }\n        })\n        .catch(err => {\n            iziToast.error({message: err.message});\n         })\n        .finally(() => {\n            theLoader.classList.remove(\"is-open\");\n            form.reset()\n        });\n });"],"names":["API_KEY","BASE_URL","BASE_PARAMS","searchPhotos","queryStr","res","createGallery","photos","galHtml","imgData","li","img","a","desc","likes","views","comms","dwnlds","sLightBox","SimpleLightbox","iziToast","theLoader","theGallery","e","form","data","err"],"mappings":"wvBAAA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAc,2DAEpB,SAASC,EAAaC,EAAU,CAC5B,OAAO,MAAM,GAAGH,CAAQ,QAAQD,CAAO,GAAGE,CAAW,MAAQ,mBAAmBE,CAAQ,CAAC,EACpF,KAAKC,GAAO,CACT,GAAI,CAACA,EAAI,GACL,MAAM,IAAI,MAAMA,EAAI,MAAM,EAE9B,OAAOA,EAAI,MACvB,CAAS,CACT,CCXA,SAASC,EAAcC,EAAQ,CAC7B,MAAMC,EAAU,SAAS,cAAc,IAAI,EAC3C,UAAWC,KAAWF,EAAQ,CAC5B,MAAMG,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,UAAU,IAAI,cAAc,EAE/B,MAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,UAAU,IAAI,eAAe,EACjCA,EAAI,aAAa,MAAOF,EAAQ,YAAY,EAC5CE,EAAI,aAAa,MAAOF,EAAQ,IAAI,EAEpC,MAAMG,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,UAAU,IAAI,cAAc,EAC9BA,EAAE,aAAa,OAAQH,EAAQ,aAAa,EAC5CG,EAAE,OAAOD,CAAG,EAEZD,EAAG,OAAOE,CAAC,EAEX,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,eAAe,EAElC,MAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,qBAAqBL,EAAQ,KAAK,GACpDI,EAAK,OAAOC,CAAK,EACjB,MAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,qBAAqBN,EAAQ,KAAK,GACpDI,EAAK,OAAOE,CAAK,EACjB,MAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,wBAAwBP,EAAQ,QAAQ,GAC1DI,EAAK,OAAOG,CAAK,EACjB,MAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,yBAAyBR,EAAQ,SAAS,GAC7DI,EAAK,OAAOI,CAAM,EAElBP,EAAG,OAAOG,CAAI,EAEdL,EAAQ,OAAOE,CAAE,CAClB,CACD,OAAOF,EAAQ,SACjB,CC3BA,MAAMU,EAAY,IAAIC,EAClB,aACA,CACE,eAAgB,GAChB,UAAW,kBACX,aAAc,MACd,aAAc,GACf,CACL,EACAC,EAAS,SAAS,CACd,MAAO,QACP,SAAU,WACV,KAAM,EACV,CAAC,EAED,MAAMC,EAAY,SAAS,eAAe,OAAO,EAC3CC,EAAa,SAAS,cAAc,UAAU,EAEpD,SAAS,eAAe,aAAa,EAAE,iBAAiB,SAAUC,GAAK,CACnEA,EAAE,eAAc,EAChB,MAAMC,EAAOD,EAAE,cACTnB,EAAWoB,EAAK,SAAS,SAAS,MAAM,OAE9CH,EAAU,UAAU,IAAI,SAAS,EACjCC,EAAW,UAAY,GACvBnB,EAAaC,CAAQ,EAChB,KAAKqB,GAAQ,CACNA,EAAK,OAAS,EACdL,EAAS,MAAM,CAAE,QAAS,0EAA4E,CAAA,GAEtGE,EAAW,UAAYhB,EAAcmB,EAAK,IAAI,EAC9CP,EAAU,QAAO,EAEjC,CAAS,EACA,MAAMQ,GAAO,CACVN,EAAS,MAAM,CAAC,QAASM,EAAI,OAAO,CAAC,CACjD,CAAU,EACD,QAAQ,IAAM,CACXL,EAAU,UAAU,OAAO,SAAS,EACpCG,EAAK,MAAO,CACxB,CAAS,CACT,CAAE"}